See this:

https://stackoverflow.com/questions/23887056/trying-to-understand-boost-asio-custom-service-implementation
